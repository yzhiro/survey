# PHP製 アンケート＆自動分析アプリケーション

## 1\. 概要

私がPHPのスキルアップと、実践的なデータ分析能力の習得を目的に開発した、アンケート＆自動データ分析アプリケーションです。

単にアンケートデータを集計するだけでなく、「**その場で統計的に分析し、専門家でなくても直感的に理解できる形で可視化する**」という点に重点を置いて開発しました。ユーザーは「かんたん分析」と、より高度な「詳細分析」をタブで切り替えながら、リアルタイムで更新されるデータに基づいた洞察を得ることができます。

## 2\. 主な機能

このアプリケーションは、大きく分けて「データ集計の可視化」「一元配置分散分析」「二元配置分散分析」の3つのコア機能を持っています。

### データ全体の可視化

  - **回答者属性の把握**: 性別・年代・年収層の構成比を円グラフで表示し、データセット全体のプロフィールを素早く理解できます。
  - **スコア比較レーダーチャート**: 全質問に対する「全体の平均スコア」と、回答直後の「自分のスコア」を重ねて表示。自身の立ち位置を視覚的に確認できるUXを提供します。

### かんたん分析 (一元配置分散分析)

  - **目的**: 1つの属性（例：年代）が、特定の質問の回答に影響を与えているかを分析します。
  - **機能**:
      - 分析軸（要因）と質問項目を自由に選択できます。
      - グループごとの平均値を比較する棒グラフを動的に生成します。
      - 分散分析（ANOVA）を自動実行し、グループ間の差が統計的に有意かどうかを **5%水準 (`*`)** と **1%水準 (`**`)** で判定し、分かりやすく表示します。

### 詳細分析 (二元配置分散分析)

  - **目的**: 2つの属性（例：年代と性別）が、それぞれ単独で、または**組み合わさることで**質問の回答にどう影響するか、というより高度な分析を行います。
  - **機能**:
      - 分析要因を2つ（要因A, 要因B）選択できます。
      - **主効果**（各要因単独の影響）と**交互作用**（要因の組み合わせによる相乗効果や相殺効果）の3つを同時に検定し、それぞれのF値と有意差を要約表にまとめます。
      - **交互作用プロット**を自動描画します。グラフの線が交差したり、傾きが大きく異なったりすることで、特定の条件下で回答傾向がどう変わるか（例：「20代の男性だけが突出してVRへの興味が高い」など）を直感的に発見できます。

## 3\. こだわった点・工夫した点

  - **PHPのみでの高度な統計処理**:

      - 外部の専門的な統計ライブラリに依存せず、PHPの標準機能だけでどこまで実践的な統計処理ができるかに挑戦しました。特に、計算が複雑な**二元配置分散分析**（平方和の分解、交互作用の算出など）のロジックを自力で実装した点が、このプロジェクトの技術的な核となっています。F分布の臨界値表もPHPの配列として実装し、有意差判定を自動化しました。

  - **直感的なUI/UX**:

      - 複雑な分析結果も一目で理解できるよう、UI/UXには特にこだわりました。JavaScriptによる**ページ遷移のないタブ切り替え**を実装し、ユーザーがストレスなく「かんたん分析」と「詳細分析」を行き来できるように設計しています。
      - また、統計に馴染みのない方でも結論がわかるよう、「結論ボックス」で分析結果を平易な言葉に「翻訳」して表示する工夫を凝らしました。

  - **リアルタイム性と拡張性**:

      - 回答データはDBを使わずテキストファイルに追記されるシンプルな設計で、サーバーへの負荷を抑えつつリアルタイム性を確保しました。将来的にデータベースへ移行することも見越した、疎結合な作りにしています。

## 4\. 使用技術

  - **Backend**: PHP
  - **Frontend**: HTML, Tailwind CSS
  - **Charts**: Chart.js

## 5\. ファイル構成

```
.
├── index.php         # アンケートの入力フォーム画面
├── submit.php        # 回答データを受け取り、ファイルに書き込む処理
├── analysis.php      # 集計・分析結果の表示画面
└── data.txt          # 回答データを保存するテキストファイル（初回送信時に自動生成）
```

## 6\. セットアップと使い方

1.  **環境の準備**:
      - PHPが動作するWebサーバー環境（XAMPP, MAMP, Dockerなど）を用意します。
2.  **ファイルの配置**:
      - `index.php`, `submit.php`, `analysis.php` の3ファイルを、サーバーの公開ディレクトリ（例: `htdocs`）内の同じフォルダに配置します。
3.  **パーミッションの設定**:
      - PHPスクリプトが`data.txt`ファイルを自動生成・書き込みできるよう、ファイルを配置したディレクトリのパーミッションを変更してください。
        ```bash
        # Linux / macOS の場合
        chmod 777 .
        ```
4.  **アプリケーションの実行**:
      - Webブラウザで `index.php` にアクセスし、アンケートに回答します。
      - 回答を送信すると、自動的に `analysis.php` に移動し、最新のデータに基づいた分析結果が表示されます。

## 7\. 今後の課題・展望

このアプリケーションは、私のスキルを証明するプロジェクトとして一つの完成を見ましたが、さらに以下のような機能拡張を構想しています。

  - [ ] **多重比較（Post-hoc検定）の実装**: 分散分析で有意差が出た場合に、具体的に「どのグループとどのグループの間に」差があるのかを特定する検定（テューキーのHSD法など）を追加する。
  - [ ] **他の統計手法の追加**: カイ二乗検定など、異なる種類のデータに対応した分析手法を実装する。
  - [ ] **管理者機能の強化**: 蓄積されたデータをCSV形式でダウンロードできる機能や、データをフィルタリングして分析対象を絞り込める機能を追加する。
  - [ ] **フロントエンドの近代化**: Vue.jsやReactを導入してフロントエンドをSPA（シングルページアプリケーション）化し、より高度でインタラクティブなUIを実現する。