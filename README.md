# PHP製 アンケート＆自動分析アプリケーション

## 1\. 概要

私がPHPのスキルアップとデータ分析の実践を目的に開発した、アンケート＆自動データ分析アプリケーションです。

単にアンケートデータを集めるだけでなく、**「その場で統計的に分析し、専門家でなくても直感的に理解できる形で可視化する」** という点に重点を置いて開発しました。回答が送信されるたびに、分析結果がリアルタイムで更新されていく様子を見ることができます。

## 2\. 主な機能

  - **アンケート回答フォーム**:

      - ユーザーの属性情報と、5段階評価の質問で構成された回答フォームです。フロントエンドにはTailwind CSSを採用し、クリーンで使いやすいUIを目指しました。

  - **リアルタイムデータ蓄積**:

      - 送信された回答は、サーバー上のテキストファイル(`data.txt`)にJSON形式で一行ずつリアルタイムに追記されます。データベースを使わないシンプルな構成で、動作の手軽さを実現しました。

  - **多彩なデータ可視化**:

      - **全体像の把握**: 回答者全体の属性（性別・年代・年収層）を円グラフで、全質問への回答傾向をレーダーチャートで表示し、データセットの全体像を素早く掴めるようにしました。
      - **個人と全体の比較**: アンケート回答直後には、自分の回答と全体の平均スコアをレーダーチャート上に重ねて表示。自身の立ち位置を視覚的に確認できるUXを提供します。
      - **クロス集計**: ユーザーが指定した軸（例：「年代別」）でグループ分けし、特定の質問への回答平均値を棒グラフで比較できます。

  - **PHPによる統計分析の実装**:

      - **一元配置分散分析 (ANOVA)**:「年代の違いによって、VRへの興味度に差はあるのか？」といった仮説を検証するため、分散分析をPHPで実装しました。
      - **統計的有意差の自動判定**: F検定の結果に基づき、その差が統計的に意味のあるものかを自動で判定します。判定基準には、一般的に用いられる5%水準 (`p < 0.05`)と、より厳しい1%水準 (`p < 0.01`) を採用しました。

## 3\. こだわった点・工夫した点

  - **PHPのみでの統計処理への挑戦**:

      - 外部の専門的な統計ライブラリに頼らず、PHPの標準機能だけでどこまで実践的な統計処理ができるかに挑戦しました。F分布の臨界値表をPHPの配列として実装し、自由度に応じて適切な値を選択して有意差を判定するロジックを自作した点が、このアプリケーションの技術的な核となっています。

  - **分析結果の「翻訳」**:

      - 統計に馴染みのない方でも結果の要点を掴めるよう、F値や自由度といった専門的な指標を提示するだけでなく、その数値が何を意味するのかを「結論ボックス」として平易な言葉で解説しました。有意差のレベルに応じてボックスの色やアスタリスク(`*`, `**`)が変わるなど、視覚的なフィードバックを多用しています。

  - **動的なレポート生成**:

      - 分析軸や質問項目をユーザーが自由に切り替えられるように設計しました。選択が変わるたびに、グラフ描画や分散分析の計算がバックエンドで走り、ページを再読み込みすることなく（※フォーム送信による再読み込みはあります）分析結果が更新されます。

## 4\. 使用技術

  - **Backend**: PHP
  - **Frontend**: HTML, Tailwind CSS
  - **Charts**: Chart.js

## 5\. ファイル構成

```
.
├── index.php         # アンケートの入力フォーム画面
├── submit.php        # 回答データを受け取り、ファイルに書き込む処理
├── analysis.php      # 集計・分析結果の表示画面
└── data.txt          # 回答データを保存するテキストファイル（自動生成）
```

## 6\. セットアップと使い方

1.  **環境の準備**:
      - PHPが動作するWebサーバー環境（XAMPP, MAMP, Dockerなど）を用意します。
2.  **ファイルの配置**:
      - `index.php`, `submit.php`, `analysis.php` の3ファイルを、サーバーの公開ディレクトリ（例: `htdocs`）内の同じフォルダに配置します。
3.  **パーミッションの設定**:
      - PHPスクリプトが`data.txt`ファイルを自動生成・書き込みできるよう、ファイルを配置したディレクトリのパーミッションを変更してください。開発環境では、以下のコマンドが最も手軽です。
        ```bash
        # Linux / macOS の場合
        chmod 777 .
        ```
4.  **アプリケーションの実行**:
      - ブラウザで `index.php` にアクセスし、アンケートに回答します。
      - 回答を送信すると、`analysis.php` に移動し、最新のデータに基づいた分析結果が表示されます。

## 7\. 今後の課題・展望

このアプリケーションは、私のPHPおよびデータ分析スキルのショーケースとして作成しましたが、さらに以下のような機能拡張を構想しています。

  - [ ] **統計手法の追加**: t検定やカイ二乗検定など、異なる種類の検定ロジックを実装する。
  - [ ] **認証機能**: ユーザーごとにログインできるようにし、過去の自分の回答履歴を閲覧・比較できる機能を追加する。
  - [ ] **管理者機能**: 蓄積されたデータをCSV形式でダウンロードできる管理者向けページを作成する。
  - [ ] **フロントエンドの強化**: Vue.jsやReactを導入してフロントエンドをSPA化し、よりインタラクティブな操作性を実現する。